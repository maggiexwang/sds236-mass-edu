---
title: "Data for One Number Story"
author: "Maggie Wang"
date: "February 11, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
```

```{r}
# pull in data
edu_orig <- read.csv("MA_Public_Schools_2017.csv")
```

```{r}
# Explore and select variables

# Only look at high schools
edu <- edu_orig %>% 
  select(School.Code, Grade, District.Name, TOTAL_Enrollment,
         High.Needs, Economically.Disadvantaged, 
         42:50, Average.In.District.Expenditures.per.Pupil,
         Average.Expenditures.per.Pupil, X..Dropped.Out,  
         MCAS_10thGrade_English_P.A.., MCAS_10thGrade_English_W.F..,
         MCAS_10thGrade_Math_P.A.., MCAS_10thGrade_Math_W.F.., 
         297:298) %>% 
  filter(Grade == "09,10,11,12") %>% 
  mutate(dropout = (X..Dropped.Out * TOTAL_Enrollment)/100, 
         black = (X..African.American * TOTAL_Enrollment)/100, 
         white = (X..White * TOTAL_Enrollment)/100, 
         hispanic = (X..Hispanic * TOTAL_Enrollment)/100, 
         asian = (X..Asian * TOTAL_Enrollment)/100, 
         other_re = (X..Native.American + X..Native.Hawaiian..Pacific.Islander + 
                    X..Multi.Race..Non.Hispanic) * TOTAL_Enrollment/100, 
         male = (X..Males * TOTAL_Enrollment)/100, 
         female = (X..Females * TOTAL_Enrollment)/100) %>% 
  rename("district" = "District.Name", 
           "total_enroll" = "TOTAL_Enrollment", "high_need" = "High.Needs", 
           "econ_dis" = "Economically.Disadvantaged", 
           "avg_dist_exp_p" = "Average.In.District.Expenditures.per.Pupil", 
           "avg_exp_p" = "Average.Expenditures.per.Pupil", 
           "mcas_10_eng_pa" = "MCAS_10thGrade_English_P.A..", 
           "mcas_10_eng_wf" = "MCAS_10thGrade_English_W.F..", 
           "mcas_10_mth_pa" = "MCAS_10thGrade_Math_P.A..", 
           "mcas_10_mth_wf" = "MCAS_10thGrade_Math_W.F..", 
           "ppi_all" = "Progress.and.Performance.Index..PPI....All.Students", 
           "ppi_high_need" = "Progress.and.Performance.Index..PPI....High.Needs.Students") %>% 
  select(district, total_enroll, high_need, econ_dis,
         black, white, hispanic, asian, other_re,
         male, female, avg_dist_exp_p, avg_exp_p, 
         mcas_10_eng_pa, mcas_10_eng_wf, 
         mcas_10_mth_pa, mcas_10_mth_wf,
         ppi_all, ppi_high_need)
```

```{r}
# Calculate district total
edu_district <- edu %>% 
  group_by(district) %>% 
  summarize(n_school = n(), enroll = sum(total_enroll), 
            high_need = sum(high_need), 
            econ_dis = sum(econ_dis), 
            black = sum(black), white = sum(white), 
            hispanic = sum(hispanic), asian = sum(asian), 
            other_re = sum(other_re), male = sum(male), 
            female = sum(female), 
            avg_dist_exp_p = median(avg_dist_exp_p), 
            avg_exp_p = median(avg_exp_p), 
            mcas_10_eng_pa = sum(mcas_10_eng_pa), 
            mcas_10_eng_wf = sum(mcas_10_eng_wf), 
            mcas_10_mth_pa = sum(mcas_10_mth_pa), 
            mcas_10_mth_wf = sum(mcas_10_mth_wf), 
            ppi_all = mean(ppi_all), ppi_high_need = mean(ppi_high_need))



# Further exploration, decide to calculate mean or median
summary(edu)

# Calculate summary by district

```

